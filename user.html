<!DOCTYPE html>
<html lang="en">

<head>
    <title>Parky - User</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="user.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link href='https://css.gg/arrow-up.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Link for icons (ege) -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- CSS link -->
    <link rel="icon" type="image/png" href="parkylogo4.png">

    <link href='https://css.gg/arrow-up.css' rel='stylesheet'>


 
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>

<body>


    <div id="wrapper">

        <div id="sidebar-wrapper">
            <ul class="sidebar-nav" style="margin-left:0;">
                <a href="user.html"> <img class="ri" src="parkylogo4.png">
                    <li class="sidebar-brand">

                        <a href="#menu-toggle" id="menu-toggle" style="margin-top:20px;float:right;"> <i class="zmdi zmdi-apps " style="font-size:20px ;" aria-hidden="true" aria-hidden="true"></i>

                    </li>
                    <li>
                        <a href="user.html"><i class="zmdi zmdi-home " aria-hidden="true"> </i> <span style="margin-left:10px;">Main Page</span>  </a>
                    </li>
                    <li>
                        <a href="parkinglots.html"> <i class="zmdi zmdi-parking " aria-hidden="true"> </i> <span style="margin-left:10px;"> Parking Lots</span> </a>
                    </li>
                    <li>
                        <a href="contactus.html"> <i class="zmdi zmdi-comment" aria-hidden="true"> </i> <span style="margin-left:10px;"> Contact Us</span> </a>
                    </li>
                    <li>
                        <a href="login.html"> <i id="logout" class="zmdi zmdi-sign-in" aria-hidden="true"> </i> <span style="margin-left:10px;"> Logout</span> </a>
                    </li>
            </ul>
        </div>
    </div>       



    
        <section class="vh-100 bg-image" style="background-image: url('backg.jpg'); ">
            <div class="mask  justify-content-center h-100 gradient-custom-3">
                <div class="container mt-4">                                        
                    <table class="table table-sm bordered table-dark">
                        <thead>
                         <th>User No</th>
                         <th>Park Lot Name</th>
                         <th>Capacity</th>
                         <th>Price</th>
                      </thead>
                     <tbody id="tbody1"></tbody>
                     </table>
             </div>
             <div id="map"></div>
            </div>
         </section>
     <!--NAVBAR BAŞLANGIÇ.-->
     
    <!--
    <nav id="navbar_top" class="navbar navbar-expand-lg navbar-light" style="background-color: #64a8f5;">
        <div class="container-fluid">
            <a class="navbar-brand" href="main.html"><img src="parkylogo4.png" width="55" height="70" class="rounded-pill" alt=""> Parky
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page"  href="user.html" >Homepage </a>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page"  href="parkinglots.html" >Add Your Parking Lot </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="contactus.html">Contact Us</a>
                    </li>

                    
                </ul>
            </div>
        </div>
        <a class="nav-item mr-3 nav-link p-2" href="login.html" style="background-color: #ffffff">Logout</a>
    </nav>
    -->




        

                <!-- Footer (Ege) -->
 <footer class="footer">
    <div class="footer-left col-md-4 col-sm-6">
        <!-- Left part of footer -->
        <p class="about">
            <span> You can find us at</span>
        </p>

        <div class="icons">
            <!-- Icons -->
            <a href="#"><i class="fa fa-facebook"></i></a>
            <a href="#"><i class="fa fa-twitter"></i></a>
            <a href="#"><i class="fa fa-linkedin"></i></a>
            <a href="#"><i class="fa fa-google-plus"></i></a>
            <a href="#"><i class="fa fa-instagram"></i></a>
        </div>
    </div>
    <div class="footer-center col-md-4 col-sm-6">
        <!-- Center part of footer -->
        <div>
            <i class="fa fa-map-marker"></i>
            <p><span> Ciplakli, Dosemealtı</span> Antalya, Turkey</p>
        </div>
        <div>
            <i class="fa fa-phone"></i>
            <p> +90 242 245 00 00</p>
        </div>
        <div>
            <i class="fa fa-envelope"></i>
            <p><a href="#"> info@parky.com</a></p>
        </div>
    </div>
    <div class="footer-right col-md-4 col-sm-6">
        <!-- Right part of footer -->
        <img src="parkylogo4.png" width="75" height="100" class="rounded-pill">
        <p class="menu">
            <a href="login.html"> Login</a> |
            <a href="main.html"> Create an account</a> |
            <a href="contactus.html"> Contact Us</a>
        </p>
        <p class="name"> Parky &copy; 2022</p>
    </div>
</footer>
        </div>
        <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
        <script src="main.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>

<script type="module">

var userNo = 0;
            var tbody = document.getElementById('tbody1');
            function AddItemToTable(lotname,capacity,price){
                let trow = document.createElement("tr");
                let td1 = document.createElement('td');
                let td2 = document.createElement('td');
                let td3 = document.createElement('td');
                let td4 = document.createElement('td');

                td1.innerHTML =++userNo;
                td2.innerHTML =lotname;
                td3.innerHTML =capacity;
                td4.innerHTML =price;

                trow.appendChild(td1);
                trow.appendChild(td2);
                trow.appendChild(td3);
                trow.appendChild(td4);

                tbody.appendChild(trow);
            }

            function AddAllItemsToTable(TheUsers){
                userNo=0;
                tbody.innerHTML="";
                TheUsers.forEach(element => {
                    AddItemToTable(element.parkinglotname,element.capacity,element.price);
                    
                });
            }
           



    import {
    initializeApp
} from "https://www.gstatic.com/firebasejs/9.6.5/firebase-app.js";
import {
    getDatabase,
    set,
    ref,
    update,
    get,
    onValue,
    child
} from "https://www.gstatic.com/firebasejs/9.6.5/firebase-database.js";
import {
    getAuth,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
} from "https://www.gstatic.com/firebasejs/9.6.5/firebase-auth.js";
const firebaseConfig = {
    apiKey: "AIzaSyA7IPa12yoXVKJkMpw0Zu_WfycPmz4toJU",
    authDomain: "aypro-7981f.firebaseapp.com",
    projectId: "aypro-7981f",
    storageBucket: "aypro-7981f.appspot.com",
    messagingSenderId: "907631520400",
    appId: "1:907631520400:web:cc9360c255fb27bfdf0615",
};
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const auth = getAuth();
onAuthStateChanged(auth, (user) => {
    if (user) {
        const uid = user.uid;
    } else {}
});
logout.addEventListener('click', (e) => {
    signOut(auth).then(() => {
        window.location = 'login.html'
    }).catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        alert(errorMessage);
    });
})

const user=auth.currentUser
function GetAllDataOnce(){
                const dbRef = ref(database);
                get(child(dbRef,"parkinglotOwners" ))
                .then((snapshot)=>{
                    var userslist =[];
                    snapshot.forEach(childSnapshot => {
                        userslist.push(childSnapshot.val());
                    });
                    AddAllItemsToTable(userslist);
                });
            }
            window.onload = GetAllDataOnce;


</script>



<script src="user.js"></script>
<script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>

</html>